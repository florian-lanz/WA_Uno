@(controller: de.htwg.se.uno.controller.controllerComponent.ControllerInterface)

@main("Uno") {
    <div class="container-fluid content-container">
        <div class="row">
            <div class="col-md-5 col-sm-12 text-center"></div>
            <div class="col-md-2 col-sm-12 text-center">
                <h1 class="unoHeading">Uno</h1>
            </div>
            <div class="col-md-5 col-sm-12 text-center">
                <div class="iconMenu">
                    <a href="/undo"><i class="fas fa-undo-alt"></i></a>
                    <a href="/redo"><i class="fas fa-redo-alt"></i></a>
                    <a href="/save"><i class="fas fa-save"></i></a>
                    <a href="/load"><i class="fas fa-file-upload"></i></a>
                </div>
            </div>
        </div>
        @for(player <- 0 until controller.getNumOfPlayers) {
            @if(player % 2 == 0 || (controller.getNumOfPlayers == 2 && player == 1)) {
                <div class="row row-padding">
                @if(controller.getNumOfPlayers == 2 && player == 1 || controller.getNumOfPlayers != 2 && player == 2) {
                    @if(controller.controllerEvent("idle").equals("Wähle eine Farbe")) {
                        <div class="col-md-12 text-center col-padding">
                            @if(controller.getHs2.charAt(2).equals('C')) {
                                <a class="clickable-card-link" href="@{
                                    s"/setspecial/${controller.getHs2}/blue"
                                }">
                                    <img class="cardClickable" src="@routes.Assets.versioned(s"images/assets/Blue_C.png")" width="5%"/>
                                </a>
                            } else {
                                <a class="clickable-card-link" href="@{
                                    s"/setspecial/${controller.getHs2}/blue"
                                }">
                                    <img class="cardClickable" src="@routes.Assets.versioned(s"images/assets/Blue_D.png")" width="5%"/>
                                </a>
                            }
                            @if(controller.getHs2.charAt(2).equals('C')) {
                                <a class="clickable-card-link" href="@{
                                    s"/setspecial/${controller.getHs2}/red"
                                }">
                                    <img class="cardClickable" src="@routes.Assets.versioned(s"images/assets/Red_C.png")" width="5%"/>
                                </a>
                            } else {
                                <a class="clickable-card-link" href="@{
                                    s"/setspecial/${controller.getHs2}/red"
                                }">
                                    <img class="cardClickable" src="@routes.Assets.versioned(s"images/assets/Red_D.png")" width="5%"/>
                                </a>
                            }
                            @if(controller.getHs2.charAt(2).equals('C')) {
                                <a class="clickable-card-link" href="@{
                                    s"/setspecial/${controller.getHs2}/green"
                                }">
                                    <img class="cardClickable" src=@routes.Assets.versioned(s"images/assets/Green_C.png") width="5%"/>
                                </a>
                            } else {
                                <a class="clickable-card-link" href="@{
                                    s"/setspecial/${controller.getHs2}/green"
                                }">
                                    <img class="cardClickable" src=@routes.Assets.versioned(s"images/assets/Green_D.png") width="5%"/>
                                </a>
                            }
                            @if(controller.getHs2.charAt(2).equals('C')) {
                                <a class="clickable-card-link" href="@{
                                    s"/setspecial/${controller.getHs2}/yellow"
                                }">
                                    <img class="cardClickable" src=@routes.Assets.versioned(s"images/assets/Yellow_C.png") width="5%"/>
                                </a>
                            } else {
                                <a class="clickable-card-link" href="@{
                                    s"/setspecial/${controller.getHs2}/yellow"
                                }">
                                    <img class="cardClickable" src=@routes.Assets.versioned(s"images/assets/Yellow_D.png") width="5%"/>
                                </a>
                            }
                        </div>
                    } else {
                        <div class="col-12 text-center col-padding">
                            <a class="clickable-card-link" href="/get">
                                <img id="deck-card" class="cardClickable stacks-padding" src=@routes.Assets.versioned("images/assets/Deck.png") width="5%">
                            </a>
                            <a class="clickable-card-link" href="/dostep">
                                <img id="nextstep-card" class="cardClickable stacks-padding" src=@routes.Assets.versioned("images/assets/nextstep.png") width="5%">
                            </a>
                            <img id="open-card-stack" class="dropzone stacks-padding" src=@routes.Assets.versioned(s"images/assets/${controller.getCardText(3, 1).replace(' ', '_')}.png") width="5%">
                        </div>
                    }
                </div>
                <div class="row row-padding">
                }
                }
            @if((player - 1) % 2 == 0 && controller.getNumOfPlayers != 2) {
                <div class="col-md-6 col-sm-12 text-center text-md-start col-padding card-padding">
                } else {
                @if(controller.getNumOfPlayers == 2 || controller.getNumOfPlayers == 3 && player == 2) {
                    <div class="col-md-12 col-sm-12 text-center col-padding card-padding">
                    } else {
                    <div class="col-md-6 col-sm-12 text-center text-md-end col-padding card-padding">
                    }
            }
            @if(controller.getNumOfPlayers == 2 && player == 1 || controller.getNumOfPlayers == 3 && player == 2
                    || controller.getNumOfPlayers == 4 && player == 2) {
                @for(card <- 0 until controller.getLength(4)) {

                    @if(controller.getCardText(4, card).charAt(0).equals('S')) {
                        <span class="container-dropzone">
                            <span class="dropzone draggable-dropzone--occupied">
                        <a class="clickable-card-link" href="@{
                            s"/choosecolor/${controller.getCardText(4, card)}"
                        }">
                        @if(controller.getNumOfPlayers <= 3) {
                            <img id="@{controller.getCardText(4, card)}" class="item-draggable cardClickable" src=@routes.Assets.versioned(s"images/assets/${
                                controller.getCardText(4, card).replace(' ',
                                    '_')
                            }.png") width="5%">
                        } else {
                            <img id="@{controller.getCardText(4, card)}" class="item-draggable cardClickable" src=@routes.Assets.versioned(s"images/assets/${
                                controller.getCardText(4, card).replace(' ',
                                    '_')
                            }.png") width="10%">
                            }
                        </a>
                            </span>
                        </span>
                    } else {
                        <span class="container-dropzone">
                            <span class="dropzone draggable-dropzone--occupied">
                        <a class="clickable-card-link" href="@{
                            s"/set/${controller.getCardText(4, card)}"
                        }">
                        @if(controller.getNumOfPlayers <= 3) {
                            <img id="@{controller.getCardText(4, card)}" class="item-draggable cardClickable" src=@routes.Assets.versioned(s"images/assets/${
                                controller.getCardText(4, card).replace(' ',
                                    '_')
                            }.png") width="5%">
                        } else {
                            <img id="@{controller.getCardText(4, card)}" class="item-draggable cardClickable" src=@routes.Assets.versioned(s"images/assets/${
                                controller.getCardText(4, card).replace(' ',
                                    '_')
                            }.png") width="10%">
                            }
                        </a>
                            </span>
                        </span>
                    }

                }
            </div>
            } else {
                @if(!(controller.getNumOfPlayers == 4 && player == 3)) {
                    @for(card <- 0 until controller.getLength(player)) {
                        @if(controller.getNumOfPlayers >= 3) {
                            <img class="cardNotClickable buzz-out-on-hover" src=@routes.Assets.versioned("images/assets/Deck.png") width="10%">
                        } else {
                            <img class="cardNotClickable buzz-out-on-hover" src=@routes.Assets.versioned("images/assets/Deck.png") width="5%">
                        }
                    }
                } else {
                    @for(card <- 0 until controller.getLength(2)) {
                        <img class="cardNotClickable buzz-out-on-hover" src=@routes.Assets.versioned("images/assets/Deck.png") width="10%">
                        }
                }
            </div>
            }
            @if(controller.getNumOfPlayers == 2 && player != 1 || (controller.getNumOfPlayers != 2 && (player == 1 || player == controller.getNumOfPlayers - 1))) {
            </div>
            }
        }
    </div>
        @if(controller.controllerEvent("idle").equals("Du bist dran. Mögliche Befehle: q, n [2 | 3 | 4], t, s Karte [Farbe], g, u, r, d, sv, ld")) {
            <p class="gameText">Du bist am Zug</p>
        } else {
            <p class="gameText">@{
                controller.controllerEvent("idle")
            }</p>
        }

        @if(controller.controllerEvent("idle").equals("Glückwunsch, du hast gewonnen!") ||
                controller.controllerEvent("idle").equals("Du hast leider verloren")) {
            <div class="row">
                <div class="col-12 text-center">
                    <form action="/new/2">
                        <input type="submit" class="btn-new-game" value="New Game: 2 Players"/>
                    </form>
                    <form action="/new/3">
                        <input type="submit" class="btn-new-game" value="New Game: 3 Players"/>
                    </form>
                    <form action="/new/4">
                        <input type="submit" class="btn-new-game" value="New Game: 4 Players"/>
                    </form>
                </div>
            </div>
        }
    </div>
}